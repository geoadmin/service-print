<Proxy ajp://localhost:8009/service-print-${print_war}>
    Order deny,allow
    Allow from all
</Proxy>



# V3
# 
# GET  /print/print/geoadmin3/capabilities.json
#
# POST /print/print/geoadmin3/report.json
#
# GET  /print/print/status/fcacc8d5-3970-4477-b98a-718fd6abcadd@505d796f-3ffc-4e55-889e-226e189dba37.json 
# 
# GET  /print/service-print-main/print/report/08e117fd-fd16-4074-8bea-b1329fb98b6b@050480a2-0a05-44e4-8a90-8a68d8d24545


# V2
#
# GET  /print/info.json
#
# POST /print/create.json
#
# POST /multiprint/create.json
#
# GET  /printprogress?id=232323
#
# GET  /printcancel
#
# GET /print/-multi23444545.pdf.printout

# V3
#RewriteRule  ${apache_entry_path}/print/service-print-${apache_base_path}/print/report/(.*)   ${apache_entry_path}/print/print/report/$1 [PT]



# Three base path are defined
# - /printserver     Tomcat application
# - /print           Print proxy (pyramid WSGI)
# - /download        Aapche direct download


# capabilities document direct to tomcat
RewriteRule  ^${apache_entry_path}/print/print/(\w+)/capabilities.json    /printserver/print/$1/capabilities.json [PT]

# Print server
ProxyPassMatch   ${apache_entry_path}/printserver/(.*) ajp://localhost:8009/service-print-${print_war}/$1
ProxyPassReverse ${apache_entry_path}/printserver/ ajp://localhost:8009/service-print-${print_war}/


# Print proxy
RewriteRule  ^${apache_entry_path}/print/print/(.*)     /print/$1 [PT]



# Download 
AliasMatch ^${apache_entry_path}/download/(.+) ${print_temp_dir}/mapfish-print$1




<LocationMatch ^${apache_entry_path}/download/(\-multi)?([0-9a-f@-_]+\.pdf\.printout)$ >
  Header set Content-Disposition "attachment; filename=map.geo.admin.ch.pdf"
  # Try to force IE to open the PDF in a new window
  # overriding what set by the print server
  SetEnvIf Request_URI "\.pdf$" PDF=pdf
  SetEnvIf User-Agent .*MSIE.* IE=1
  SetEnvIf User-Agent .*MSIE 1[0-9]+.* IE10=1

  Header set Content-Disposition "inline" env=IE
  Header set Content-Type "application/octet-stream" env=PDF

  Header set Content-Type "application/pdf"  env=IE10
  Header set Content-Disposition "attachment; filename=map.geo.admin.ch.pdf" env=IE10
</LocationMatch>

