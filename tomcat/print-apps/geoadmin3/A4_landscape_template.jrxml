<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version last-->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="10" isSummaryNewPage="false" uuid="9a3e59f5-6675-48cf-ad74-9c42b5a5b290">
    <property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.HorizontalRowLayout"/>
    <property name="com.jaspersoft.studio.unit." value="pixel"/>
    <property name="com.jaspersoft.studio.unit.pageHeight" value="cm"/>
    <property name="com.jaspersoft.studio.unit.pageWidth" value="cm"/>
    <property name="com.jaspersoft.studio.unit.topMargin" value="mm"/>
    <property name="com.jaspersoft.studio.unit.bottomMargin" value="mm"/>
    <property name="com.jaspersoft.studio.unit.leftMargin" value="mm"/>
    <property name="com.jaspersoft.studio.unit.rightMargin" value="mm"/>
    <parameter name="mapSubReport" class="java.lang.String"/>
    <parameter name="name" class="java.lang.String"/>
    <parameter name="scalebarSubReport" class="java.lang.String"/>
    <parameter name="northArrowSubReport" class="java.lang.String"/>
    <parameter name="scale_string" class="java.lang.String"/>
    <parameter name="printed_on" class="java.lang.String"/>
    <parameter name="copyright" class="java.lang.String"/>
    <parameter name="legend" class="net.sf.jasperreports.engine.data.JRTableModelDataSource"/>
    <parameter name="legendSubReport" class="java.lang.String"/>
    <parameter name="scale" class="java.lang.String">
      <defaultValueExpression><![CDATA[5000]]></defaultValueExpression>
    </parameter>
    <parameter name="url" class="java.lang.String">
      <defaultValueExpression><![CDATA["http://map.geo.admin.ch"]]></defaultValueExpression>
    </parameter>
    <parameter name="qrimage" class="java.lang.String">
      <defaultValueExpression><![CDATA["http://api3.geo.admin.ch/qrcodegenerator?url=https://s.geo.admin.ch/6725fee885"]]></defaultValueExpression>
    </parameter>
    <field name="table" class="net.sf.jasperreports.engine.data.JRMapCollectionDataSource"/>
    <field name="displayName" class="java.lang.String"/>
    <field name="reportTemplate" class="java.lang.String"/>
    <title>
      <band height="565" splitType="Stretch">
	<!--Map subreport-->
	<subreport>
	  <reportElement x="0" y="0" width="800" height="520" uuid="fa145068-76a5-4834-98ed-ce65b1976b3d">
	 	<property name="local_mesure_unitwidth" value="pixel"/>
		<property name="local_mesure_unitheight" value="pixel"/>
		<property name="com.jaspersoft.studio.unit.height" value="px"/>
		<property name="local_mesure_unity" value="pixel"/>
		<property name="com.jaspersoft.studio.unit.y" value="px"/>
	  </reportElement>
	  <subreportExpression><![CDATA[$P{mapSubReport}]]></subreportExpression>
	</subreport>
	<!--swisstopo name & copyright symbol-->
        <textField>
          <reportElement x="5" y="490" width="800" height="50" uuid="3988392b-f1e2-4eda-9cb4-7caa2b3eb0cc"/>
          <textElement>
            <font size="8"/>
          </textElement>
          <textFieldExpression><![CDATA[$P{name}]]></textFieldExpression>
        </textField>
        <!--Logo-->
        <image scaleImage="RetainShape">
          <reportElement x="3" y="522" width="122" height="33" uuid="70bbdaea-7cb7-4c97-b3ad-fd38c75a98ad"/>
          <imageExpression><![CDATA["logo_ch.png"]]></imageExpression>
        </image>
        <textField>
          <reportElement x="132" y="522" width="670" height="33" uuid="90411500-de3c-418d-9c8d-cac869972f42"/>
          <textElement>
            <font size="7"/>
          </textElement>
          <textFieldExpression><![CDATA[$P{copyright}]]></textFieldExpression>
        </textField>
        <!--North arrow-->
        <subreport>
          <reportElement x="760" y="10" width="30" height="30" uuid="fa145068-76a5-4834-98ed-ce65b1976b3d">
            <property name="local_mesure_unitwidth" value="pixel"/>
            <property name="com.jaspersoft.studio.unit.width" value="px"/>
            <property name="local_mesure_unitheight" value="pixel"/>
            <property name="com.jaspersoft.studio.unit.height" value="px"/>
          </reportElement>
          <subreportExpression><![CDATA[$P{northArrowSubReport}]]></subreportExpression>
        </subreport>
        <!--rectangle containing information-->
        <rectangle>
          <reportElement uuid="b844ceda-3ba1-40e0-9fe3-bc353c8f593a" x="598" y="473" width="132" height="43" backcolor="#FFFFFF"/>
        </rectangle>
        <!--Scalebar subreport-->
        <subreport>
          <reportElement x="575" y="477" width="140" height="16" uuid="fa145068-76a5-4834-98ed-ce65b1976b3d">
            <property name="local_mesure_unitwidth" value="pixel"/>
            <property name="com.jaspersoft.studio.unit.width" value="px"/>
            <property name="local_mesure_unitheight" value="pixel"/>
            <property name="com.jaspersoft.studio.unit.height" value="px"/>
          </reportElement>
          <subreportExpression><![CDATA[$P{scalebarSubReport}]]></subreportExpression>
        </subreport>
        <!--Approximate scale-->
        <textField>
          <reportElement x="564" y="492" width="100" height="29" uuid="eeaea6dd-01ac-4bbe-9216-e47772a7bcd9"/>
          <textElement textAlignment="Right">
            <font size="7"/>
          </textElement>
          <textFieldExpression><![CDATA[$P{scale_string}]]></textFieldExpression>
        </textField>
        <staticText>
          <reportElement x="665" y="492" width="100" height="29" uuid="eeaea6dd-01ac-4bbe-9216-e47772a7bcd9"/>
          <textElement>
            <font size="7"/>
          </textElement>
          <text><![CDATA[1 :]]></text>
        </staticText>
        <textField>
          <reportElement x="675" y="492" width="50" height="29" uuid="7a0a9863-e339-4697-b24b-d6178dbb85c5"/>
          <textElement>
            <font size="7"/>
          </textElement>
          <textFieldExpression><![CDATA[$P{scale}]]></textFieldExpression>
        </textField>
        <!--Printed on-->
        <textField>
          <reportElement x="553" y="499" width="100" height="29" uuid="eeaea6dd-01ac-4bbe-9216-e47772a7bcd9"/>
          <textElement textAlignment="Right">
            <font size="7"/>
          </textElement>
          <textFieldExpression><![CDATA[$P{printed_on}]]></textFieldExpression>
        </textField>
        <textField pattern="dd.MM.yyyy HH:mm">
          <reportElement x="655" y="499" width="100" height="29" uuid="683ac128-5095-4dcc-849f-3014faec93b6"/>
          <textElement>
            <font size="7"/>
          </textElement>
          <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
        </textField>
        <textField>
          <reportElement x="588" y="506" width="140" height="20" uuid="39ebc32b-521c-4db2-9e67-82ba86a9850c"/>
          <textElement textAlignment="Right">
            <font size="7"/>
          </textElement>
          <textFieldExpression><![CDATA[$P{url}]]></textFieldExpression>
        </textField>
        <!--QR code-->
        <rectangle>
          <reportElement uuid="b844ceda-3ba1-40e0-9fe3-bc353c8f593a" x="735" y="453" width="68" height="68" backcolor="#FFFFFF"/>
          <graphicElement>
            <pen lineWidth="0"/>
          </graphicElement>
        </rectangle>
        <image>
          <reportElement x="737" y="455" width="67" height="67" uuid="4e19a7b3-e5c9-4db3-ba26-65fd8e83fba6">
            <property name="local_mesure_unitwidth" value="pixel"/>
            <property name="com.jaspersoft.studio.unit.width" value="px"/>
            <property name="local_mesure_unitheight" value="pixel"/>
            <property name="com.jaspersoft.studio.unit.height" value="px"/>
          </reportElement>
          <imageExpression><![CDATA[$P{qrimage}]]></imageExpression>
        </image>
	<!--Legend-->
        <subreport>
          <reportElement mode="Transparent" x="-1" y="555" width="555" height="10" backcolor="#FFFFFF" uuid="b4cae0ad-a520-425e-b790-d6984af7ddc8"/>
          <dataSourceExpression><![CDATA[$P{legend}]]></dataSourceExpression>
          <subreportExpression><![CDATA[$P{legendSubReport}]]></subreportExpression>
        </subreport>
     </band>
   </title>
</jasperReport>
